version: v1

name: lug.pub
protoc:
  deps:
    - name: google
      url: github.com/googleapis/googleapis@v0.0.0-20200429181057-7e1c7603c8cb/google
      path: /google
    - name: protoc-gen-openapiv2
      url: github.com/grpc-ecosystem/grpc-gateway/v2@v2.5.0/protoc-gen-openapiv2
      path: /protoc-gen-openapiv2
    - name: go-proto-validators
      url: github.com/mwitkow/go-proto-validators@v0.3.2
      path: /go-proto-validators
    - name: protobuf
      url: /usr/local/include/google/protobuf
      path: /google/protobuf
    - name: gogoproto
      url: github.com/gogo/protobuf@v1.3.2/gogoproto
      path: /gogoproto
  input:
    - example/proto/hello/*.proto
    - example/proto/login/*.proto
  plugins:
    go:
#      - Mgoogle/protobuf/timestamp.proto=github.com/gogo/protobuf/types
#      - Mgoogle/protobuf/duration.proto=github.com/gogo/protobuf/types
#      - Mgoogle/protobuf/empty.proto=github.com/gogo/protobuf/types
#      - Mgoogle/api/annotations.proto=github.com/gogo/googleapis/google/api
#      - Mgoogle/protobuf/field_mask.proto=github.com/gogo/protobuf/types
      - paths=source_relative:.
    grpc-gateway:
      - paths=source_relative
      - allow_repeated_fields_in_body=true:.
    go-grpc:
      - paths=source_relative
      - require_unimplemented_servers=false:.
    lug:
      - :.
    openapiv2:
      - logtostderr=true
      - allow_repeated_fields_in_body=true
      - repeated_path_param_separator=ssv:.
    govalidators:
      - paths=source_relative:.
